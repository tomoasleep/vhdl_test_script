-- This file is generated by vhdl_test_script
-- https://github.com/tomoasleep/vhdl_test_script/
library IEEE;
use IEEE.STD_LOGIC_1164.all;
use IEEE.NUMERIC_STD.all;

library work;
use work.vhdl_test_script_utils.all;
<%= define_library_use(scenario.package_names) %>

entity <%= with_test_prefix(entity.name) %> is
end <%= with_test_prefix(entity.name) %>;

architecture sim of <%= with_test_prefix(entity.name) %> is
  component <%= entity.name %>
  <% unless actor.generic_assigns.empty? %>
  generic (
    <%= generic_definition_mappings(actor.generic_assigns.keys) %>
  );
  <% end %>
  port(
    <%= ports_definitions(entity.ports) %>
    );
  end component;

  <%= signal_definitions(entity.ports) %>
  signal sim_finish_flag : boolean := false;

begin

  dut: <%= entity.name %>
  <% unless actor.generic_assigns.empty? %>
    generic map (
      <%= generic_assign_mappings(actor.generic_assigns) %>
    )
  <% end %>
    port map (
      <%= dut_mappings(entity.ports) %>
    );

  process begin
    <%= testcases_to_vhdl(actor.steps) %>
    sim_finish_flag <= true;
    wait;
  end process;

  <%= clock_process %>

end sim;

